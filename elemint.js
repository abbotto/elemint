// @elemint/elemint v1.0.0 | Tricks for the DOM
// Copyright (c) 2018-2020 Jared Abbott
// Distributed under the MIT license
!function(e){if(!(Element.prototype.matches&&e.MutationObserver&&e.requestAnimationFrame))throw Error("Your browser is unsupported - consider upgrading to the latest version.");function t(e,t){return function(...n){return e.apply(t,n)}}function o(e,t){return e.currentStyle?e.currentStyle[l(t)]:f.context.defaultView&&f.context.defaultView.getComputedStyle?f.context.defaultView.getComputedStyle(e,null).getPropertyValue(t):e.style[l(t)]}const i=Function.prototype.call.bind(Object.prototype.toString);function r(e,t){const n=[];let o=e.length;for(o>0||(e=[e],o=1);o--;)t(e[o])&&n.push(e[o]);return n}function l(e){return e.replace(/(?:^|[-])(\w)/g,(e,t)=>t?t.toUpperCase():"")}const s={abort:document.createElement("img"),change:document.createElement("input"),error:document.createElement("img"),load:document.createElement("img"),reset:document.createElement("form"),select:document.createElement("input"),submit:document.createElement("form")},c=document.createElement("div"),u=function(e,t){const n=()=>{t(),m.job[e]=requestAnimationFrame(n)};!m.job[e]&&n()};function f(e){const t=e.getElementById("__stylesheet__");f.context=e,t?(f.element=t,f.sheet=f.element.sheet):(f.element=e.createElement("style"),f.element.appendChild(e.createTextNode("")),f.sheet=e.head.appendChild(f.element).sheet,f.element.id="__stylesheet__")}const m={job:{}},a={tag:null,callback:()=>{}};function h(...e){let t,n;const o=e.length,i=this[0];let r=this[1];for(;r--;)if(i[r].className){for(n=i[r].className?i[r].className.split(" "):[],t=o;t--&&n.indexOf(e[t])<1;)n.push(e[t]);i[r].className=n.join(" ")}else i[r].className=e.join(" ")}function d(e,t){let n,o;const i=this[0];let r=this[1];for(;r--;)(o=i[r].className?i[r].className.split(" "):[]).length?(n=o.indexOf(e))>-1&&(o[n]=t):o.push(e),i[r].className=o.join(" ")}function p(...e){let t,n,o;const i=e.length,r=this[0];let l=this[1];for(;l--;)if(r[l].className){for(t=i,o=r[l].className.split(" ");t--;)(n=o.indexOf(e[t]))>-1&&o.splice(n,1);r[l].className=o.join(" ")}}const g={job:{}};function b(t,n){const o=this[0];let i,r=this[1];if(n||(n={bubbles:!0,cancelable:!0}),function(e){const t=s[e]||c;let n=(e="on"+e)in t;return n||(t.setAttribute(e,"return;"),n="function"==typeof t[e]),n}(t)?"function"==typeof Event?i=new Event(t):document.createEvent?(i=document.createEvent("HTMLEvents")).initEvent(t,!0,!0):(i=document.createEventObject()).eventType=t:e.CustomEvent?i=new CustomEvent(t,n):document.createEvent&&(document.createEvent("CustomEvent"),i.initCustomEvent(t,!0,!0,n)),i.eventName=t,document.createEvent)for(;r--;)o[r].dispatchEvent(i);else o[r].fireEvent("on"+i.eventType,i)}const v={mousedown:"onmousedown"in e?"mousedown":"touchstart",mousemove:"onmousemove"in e?"mousemove":"touchmove",mouseout:"onmouseout"in e?"mouseout":"touchcancel",mouseup:"onmouseup"in e?"mouseup":"touchend",touchcancel:"ontouchcancel"in e?"touchcancel":"mouseout",touchend:"ontouchend"in e?"touchend":"mouseup",touchmove:"ontouchmove"in e?"touchmove":"mousemove",touchstart:"ontouchstart"in e?"touchstart":"mousedown"};function y(n,o){const i=this[0];let r=this[1];const l=n.on?v[n.on]||n.on:n;if(n.on){const t=n.tag,o=n.callback;function s(n){if(!g.job[t])return!1;(n=n||e.event).source=n.source||n.srcElement;const o=n.target||n.source,i=g.job[t].target,l=g.job[t].callback;if(i){if(i){const e=[].slice.call(this.querySelectorAll(i)),c=e.length;for(;r--;)o===e[c]&&(!0===limit&&(this.removeEventListener(n.type,s,0),g.job[t]&&delete g.job[t]),l.call(n.source,n))}}else!0===g.job[t].limit&&(this.removeEventListener(n.type,s,0),g.job[t]&&delete g.job[t]),l.call(this,n)}for(n=Object.assign({},{tag:"",on:"",target:!1,callback:()=>{},limit:!1},n),t&&!g.job[t]&&o&&(g.job[t]=n);r--;)i[r].addEventListener(l,s,0)}else for(;r--;)i[r].addEventListener(l,t(o,i[r]),0)}function E(e,n){const o=this[0];let i=this[1];const r=g.job[e].callback||n,l=n?e:g.job[e].on;for(;i--;)o[i].removeEventListener(l,t(r,o[i]),0);g.job[e]&&delete g.job[e]}function j(){const t=this.style["z-index"];return e.document.defaultView.getComputedStyle(this).getPropertyValue("z-index"),parseInt(t,10)}function w(e){const t=this[0];let n=this[1];for(;n--;)t[n].style["z-index"]=e;return parseInt(e,10)}function C(t){if(!0===t)return{top:this.offsetTop,left:this.offsetLeft};const n=this.getBoundingClientRect(),o=document.body;return{top:n.top+(e.pageYOffset||o.scrollTop),left:n.left+(e.pageXOffset||o.scrollLeft)}}function x(e){const t=this[0];let n=this[1];for(;n--;)(e.top||e.left)&&(t[n].style.position="fixed"),e.top&&(t[n].style.top=e.top+"px"),e.left&&(t[n].style.left=e.left+"px")}function $(...e){const t=this;if(1===e.length)return t.getAttribute(e[0])||t[e[0]];const n={};let o=e.length;for(;o--;)n[e[o]]=t.getAttribute(e[o])||t[e[o]];return n}function k(e,t){const n=this[0];let o,r=this[1];if(void 0!==t&&e.substring)if(t.substring())for(;r--;)e in n[r]?n[r].setAttribute(e,t):n[r][e]=t;else for(;r--;)n[r].removeAttribute(e);else if("[object Object]"===i(e))for(;r--;)for(o in e)e.hasOwnProperty(o)&&(e[o].substring()?o in n[r]?n[r].setAttribute(o,e[o]):n[r][o]=e[o]:n[r].removeAttribute(o))}function N(e){return e in(this.substring?document.createElement(this):this)}function O(e){const t=this[0];let n=this[1];for(;n--;)e in t[n]?t[n].removeAttribute(e):delete t[n][e]}function A(t){let n,o,i;const r={},l=["height","width"],s=l.indexOf(t)>-1?[t]:l,c=this;if(void 0!==c){let t=0;for(;t<s.length;t+=1)s[t]=s[t][0].toUpperCase()+s[t].slice(1),c===e?i=Math.max(c["inner"+s[t]]):(o=(n=c.body||c.documentElement||c)["offset"+s[t]],n["scroll"+s[t]]||n["client"+s[t]],i=Math.max(o)),r[s[t].toLowerCase()]=i+"px"}return r}function S(e){let t;const n=this[0];let o=this[1];for(;o--;)for(t in e)e.hasOwnProperty(t)&&("width"!==t&&"height"!==t||(n[o].style[t]=e[t]))}function B(...e){const t=this;if(1===e.length)return o(t,e[0]);const n={};let i=e.length;for(;i--;)n[e[i]]=o(t,e[i]);return n}function T(e,t){const n=this[1],o=this[2];let r=this[0],l="",s=n;if(r&&r[0]&&r[0].substring)if(f(o||document),"[object Array]"===i(r))for(s=0;s<n;)f.sheet.insertRule(r[s],f.sheet.cssRules.length),s+=1;else if(t&&t.substring)r+=" { "+e+":"+t+"; }",f.sheet.insertRule(r,f.sheet.cssRules.length);else if("[object Object]"===i(e)){for(Z in e)e.hasOwnProperty(Z)&&("content"===Z&&(e[Z]="'"+e[Z]+"';"),l+=Z+":"+e[Z]+";");r+=" { "+l+" }",f.sheet.insertRule(r,f.sheet.cssRules.length)}else r.substring&&f.element.appendChild(f.context.createTextNode(r));else if(r){let n;if(e&&e.substring&&t)for(;s--;)r[s].style[e]=t;else{if("[object Object]"!==i(e))throw Error("Argument failed. Invalid argument.");for(;s--;)for(n in e)e.hasOwnProperty(n)&&(r[s].style[n]=e[n])}}}const L={job:{}};function R(e,t,n){const o=this||document,i=new MutationObserver(e=>(n(e,i),e));L.job[e]=i,i.observe(o,t)}function F(e,t){const n=[];let o=0,i=e.length;if(i>0||(e=[e],i=1),t&&t.substring)for(;e[o];){if(e[o+1]=e[o].nextElementSibling,e[o+1]&&e[o+1].matches(t)){n.push(e[o+1]);break}o+=1}else for(;e[o];)n.push(e[o].nextElementSibling),o+=1;return n}const I={set:function(e){const t=(e=Object.assign({},a,e)).tag,n=e.callback;if(t){if(!n)return!!m.job[t];u(t,n)}},void:function(t){e.cancelAnimationFrame(m.job[t]);const n=!!m.job[t];return delete m.job[t],n}};function _(e,t,n){parseInt(t,10)&&(n=t,t=null);let o=-1,i=e.length;i>0||(e=[e],i=1);const r=[];let l=0;for(;(o+=1)<i;){let i=e[o];for(;i.parentElement&&(!n||l<=n);)l+=1,i=i.parentElement,t&&!i.matches(t)||r.push(i);l=0}return r}function P(e,t){const n=[];let o=e.length;if(o>0||(e=[e],o=1),t&&t.substring)for(;e[o-1];){if(e[o-2]=e[o-1].previousElementSibling,e[o-2].matches(t)){n.push(e[o-2]);break}o--}else for(;o--;)n.push(e[o].previousElementSibling);return n}function M(e,t){let n=e.length;n>0||(e=[e],n=1);const o=[];let i,r;if(t)for(;n--;)for(r=(i=e[n].children).length;r--;)i[r].matches(t)&&o.unshift(i[r]);else for(;n--;)for(r=(i=e[n].childNodes).length;r--;)o.unshift(i[r]);return o}function V(e){let n=e?e.length:0;return n>0||(e=[e],n=1),{set:t(h,[e,n]),swap:t(d,[e,n]),void:t(p,[e,n])}}const q={set:function(...e){return V(elemint.fn.$).set(...e),elemint.fn},swap:function(e,t){return V(elemint.fn.$).swap(e,t),elemint.fn},void:function(...e){return V(elemint.fn.$).void(...e),elemint.fn}};function z(e,t,n,o){o||(z.collector=[]),parseInt(t,10)&&(n=t,t=null);let i,r=o||0,l=-1,s=e.length,c=[];for(s>0||(e=[e],s=1);(l+=1)<s;)!e[l]||t&&!e[l].matches(t)||z.collector.push(e[l]),(i=e[l].children)&&i.length&&(c=c.concat([].slice.call(i)));for(l=-1,s=c.length,r+=1;(l+=1)<s;)i[l]&&(!n||r<=n)&&z(i[l],t,n,r);return z.collector}function U(e){let n=e.length;n>0||(e=[e],n=1);const o=["blur","click","dblclick","focus","keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","submit","touchcancel","touchend","touchenter","touchleave","touchmove","touchstart"],i={emit:t(b,[e,n]),void:t(E,[e,n]),set:t(y,[e,n])},r=function(){this[0].call(e,this[1])};let l=o.length;for(;l--;)i[o[l]]=t(r,[i.emit,o[l]]);return i}const X={emit:function(e,t){return U(elemint.fn.$).emit(e,t),elemint.fn},set:function(e){return U(elemint.fn.$).set(e),elemint.fn},void:function(e,t){return U(elemint.fn.$).void(e,t),elemint.fn}};function D(e){let n=e.length;if(n>0||(e=[e],n=1),1===e[0].nodeType)return{get:t(j,e[0]),set:t(w,[e,n])};throw Error("Not an element")}const Y={get:function(){return D(elemint.fn.$).get()},set:function(e){return D(elemint.fn.$).set(e),elemint.fn}};function H(e,t,n){return t.substring&&"function"==typeof n?r(e,e=>{if(e.matches(t))return n(e)}):t.substring?r(e,e=>e.matches(t)):"function"==typeof t&&r(e,e=>t(e))}const G=["after","before","innerBegin","innerEnd","outerBegin","outerEnd"];function J(e,t,n){let o=e.length||0;o>0||(e=[e],o=1);let i,r=-1;if(G.indexOf(t)<0&&(n=t,t=!1),n&&n.substring&&(n=document.createRange().createContextualFragment(n)),n||t)if(t)for(;o--;)switch(i=e[o].parentNode||document.documentElement,t){case"after":i.insertBefore(n,e[o].nextElementSibling);break;case"before":i.insertBefore(n,e[o]);break;case"innerBegin":e[o].insertBefore(n,e[o].firstChild);break;case"innerEnd":e[o].appendChild(n);break;case"outerBegin":i.insertBefore(n,i.firstChild);break;case"outerEnd":i.appendChild(n);break;default:throw Error("Unknown mountpoint: "+t)}else for(;o--;){for(;e[o].lastChild;)e[o].removeChild(e[o].lastChild);e[o].appendChild(n)}else for(;(r+=1)<o;)document.body.appendChild(e[r])}function K(e){let n=e.length;return n>0||(e=[e],n=1),{get:t(C,e[0]),set:t(x,[e,n])}}const Q={get:function(e){return K(elemint.fn.$).get(e)},set:function(e){return K(elemint.fn.$).set(e),elemint.fn}};function W(e,t){const n=[];let o=e.length||0;if(o>0||(e=[e],o=1),t){let t;for(;o--;)(t=e[o].offsetParent)&&n.push(t)}else for(;o--;)n.push(e[o].parentNode);return n}function Z(e){let n=e.length||0;return n>0||(e=[e],n=1),{get:t($,e[0]),void:t(O,[e,n]),set:t(k,[e,n]),test:t(N,e[0])}}const ee={get:function(...e){return $.apply(elemint.fn.$[0],e)},set:function(e,t){return Z(elemint.fn.$).set(e,t),elemint.fn},test:function(e){return N.apply(elemint.fn.$[0],e)},void:function(e){return Z(elemint.fn.$).void(e),elemint.fn}};function te(e,t){const n=t||document;if(/^((#|\.)?[\w-]+|((\.[\w-]+)(\s\.[\w-]+)+?)+)$/.test(e)){const t=e.charAt(0);return"#"===t?[n.getElementById(e.slice(1))]:"."===t?Array.prototype.slice.call(n.getElementsByClassName(e.replace(/\./g,""))):Array.prototype.slice.call(n.getElementsByTagName(e))}if("string"==typeof e)return Array.prototype.slice.call(n.querySelectorAll(e));if(1===(o=e).nodeType||9===o.nodeType||11===o.nodeType)return[e];if(e[0]&&e[0].nodeType)return Array.prototype.slice.call(e);var o;throw Error("Invalid argument.")}function ne(e,t){let o;const i=[];let r=e.length;for(r>0||(e=[e],r=1);r--;)for(o=e[r].parentNode.childNodes,n=o.length;n--;)o[n]!==e[r]&&o[n].matches(t)?i.unshift(o[n]):o[n]!==e[r]&&i.unshift(o[n]);return i.length>1?i:i[0]}function oe(e){let n=e.length||0;return n>0||(e=[e],n=1),{get:t(A,e[0]),set:t(S,[e,n])}}const ie={get:function(e){return oe(elemint.fn.$).get(e)},set:function(e){return oe(elemint.fn.$).set(e),elemint.fn}};function re(e,n){let o=e?e.length:0;return o>0||(e=[e],o=1),{get:t(B,e[0]),set:t(T,[e,o,n])}}const le={get:function(...e){return B.apply(elemint.fn.$[0],e)},set:function(e,t){return re(elemint.fn.$,elemint.fn.context).set(e,t),elemint.fn}};function se(e,t){let n,o,i=e.length||0;i>0||(e=[e],i=1);const r=G.indexOf(t);for(r<0&&(n=t);i--;)if(n)e[i].removeChild(n);else if(r>-1)switch(o=e[i].parentNode||document.documentElement,t){case"after":o.removeChild(e[i].nextElementSibling);break;case"before":o.removeChild(e[i].previousElementSibling);break;case"innerBegin":e[i].removeChild(e[i].firstChild);break;case"innerEnd":e[i].removeChild(e[i].lastChild);break;case"outerBegin":o.removeChild(o.firstChild);break;case"outerEnd":o.removeChild(o.lastChild);break;default:throw Error("Unknown mountpoint: '"+t+"'.")}else e[i].parentNode.removeChild(e[i])}function ce(e){return{set:t(R,e)}}ce.void=function(e){const t=!!L.job[e];return L.job[e].disconnect(),delete L.job[e],t},e.elemint=((t,n)=>(elemint.fn.context=n||document,elemint.fn.$=t!==e?te(t,elemint.fn.context):[t],elemint.fn.selector=t,new elemint.fn)),elemint.fn=elemint.prototype=function(){},elemint.fn.prototype=elemint.fn,elemint.fn.plugin=elemint.fn,e.$||(e.$=elemint),"undefined"!=typeof module&&module.exports&&(module.exports=elemint),elemint.fn.after=function(e){return elemint(F(this.$,e))},elemint.fn.ascend=function(e,t){return elemint(_(this.$,e,t))},elemint.fn.before=function(e){return elemint(P(this.$,e))},elemint.fn.child=function(e){return elemint(M(this.$,e))},elemint.fn.class=q,elemint.fn.descend=function(e,t){return elemint(z(this.$,e,t))},elemint.fn.event=X,elemint.fn.layer=Y,elemint.fn.match=function(e,t){return elemint(H(this.$,e,t))},elemint.fn.mount=function(e,t){return J(this.$,e,t),this},elemint.fn.offset=Q,elemint.fn.parent=function(e){return elemint(W(this.$,e))},elemint.fn.prop=ee,elemint.fn.sibling=function(e){let t=ne(this.$,e);return t=t.length>1?t:[t],elemint(t)},elemint.fn.size=ie,elemint.fn.style=le,elemint.fn.unmount=function(e,t){return se(this.$,e),this},elemint.after=F,elemint.animate=I,elemint.ascend=_,elemint.before=P,elemint.child=M,elemint.class=V,elemint.descend=z,elemint.event=U,elemint.fragment=function(e){let t;if(e.substring)t=document.createRange().createContextualFragment(e);else{t=document.createDocumentFragment();let n=e.length;n>0||(e=[e],n=1);let o=0;for(;o<n;o+=1)t.appendChild(e[o])}return t},elemint.layer=D,elemint.match=H,elemint.mount=J,elemint.offset=K,elemint.parent=W,elemint.prop=Z,elemint.query=elemint.$=te,elemint.ready=function(n,o){"function"==typeof n&&(o=n,n=document),"complete"!==n.readyState&&"loaded"!==n.readyState&&(e.ActiveXObject||"ActiveXObject"in e||"interactive"!==n.readyState)?n.addEventListener("DOMContentLoaded",t(o,n),0):o.call(n)},elemint.render=function(e){const t=document.createRange().createContextualFragment(e);return[].slice.call(t.childNodes)},elemint.sibling=ne,elemint.size=oe,elemint.style=re,elemint.unmount=se,elemint.watch=ce,elemint.version="1.0.0",elemint}(window||global||globalThis);
