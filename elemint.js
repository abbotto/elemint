// @elemint/elemint v1.0.0 | Tricks for the DOM
// Copyright (c) 2020 Jared Abbott
// Distributed under the MIT license
!function(e){if(!(Element.prototype.matches&&e.MutationObserver&&e.requestAnimationFrame))throw Error("Your browser is unsupported - consider upgrading to the latest version.");function t(e,t){return function(){return e.apply(t,arguments)}}let o;const r={};function i(e,t){return e.currentStyle?e.currentStyle[l(t)]:r.context.defaultView&&r.context.defaultView.getComputedStyle?r.context.defaultView.getComputedStyle(e,null).getPropertyValue(t):e.style[l(t)]}r.context=document,r.element=o=document.createElement("style"),r.element.appendChild(r.context.createTextNode("")),r.sheet=document.head.appendChild(o).sheet;const s=Function.prototype.call.bind(Object.prototype.toString);function c(e,t){const n=[];let o=e.length;for(o>0||(e=[e],o=1);o--;)t(e[o])&&n.push(e[o]);return n}function l(e){return e.replace(/(?:^|[-])(\w)/g,(e,t)=>t?t.toUpperCase():"")}const u={abort:document.createElement("img"),change:document.createElement("input"),error:document.createElement("img"),load:document.createElement("img"),reset:document.createElement("form"),select:document.createElement("input"),submit:document.createElement("form")},f=document.createElement("div"),$=function(e,t){const n=()=>{t(),a.job[e]=requestAnimationFrame(n)};!a.job[e]&&n()},a={job:{}},h={tag:null,callback:()=>{}};function d(...e){let t,n;const o=e.length,r=this[0];let i=this[1];for(;i--;)if(r[i].className){for(n=r[i].className?r[i].className.split(" "):[],t=o;t--&&n.indexOf(e[t])<1;)n.push(e[t]);r[i].className=n.join(" ")}else r[i].className=e.join(" ")}function m(e,t){let n,o;const r=this[0];let i=this[1];for(;i--;)(o=r[i].className?r[i].className.split(" "):[]).length?(n=o.indexOf(e))>-1&&(o[n]=t):o.push(e),r[i].className=o.join(" ")}function p(...e){let t,n,o;const r=e.length,i=this[0];let s=this[1];for(;s--;)if(i[s].className){for(t=r,o=i[s].className.split(" ");t--;)(n=o.indexOf(e[t]))>-1&&o.splice(n,1);i[s].className=o.join(" ")}}const g={job:{}};function b(t,n){const o=this[0];let r,i=this[1];if(n||(n={bubbles:!0,cancelable:!0}),function(e){const t=u[e]||f;let n=(e="on"+e)in t;return n||(t.setAttribute(e,"return;"),n="function"==typeof t[e]),n}(t)?"function"==typeof Event?r=new Event(t):document.createEvent?(r=document.createEvent("HTMLEvents")).initEvent(t,!0,!0):(r=document.createEventObject()).eventType=t:e.CustomEvent?r=new CustomEvent(t,n):document.createEvent&&(document.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,n)),r.eventName=t,document.createEvent)for(;i--;)o[i].dispatchEvent(r);else o[i].fireEvent("on"+r.eventType,r)}const v={mousedown:"onmousedown"in e?"mousedown":"touchstart",mousemove:"onmousemove"in e?"mousemove":"touchmove",mouseout:"onmouseout"in e?"mouseout":"touchcancel",mouseup:"onmouseup"in e?"mouseup":"touchend",touchcancel:"ontouchcancel"in e?"touchcancel":"mouseout",touchend:"ontouchend"in e?"touchend":"mouseup",touchmove:"ontouchmove"in e?"touchmove":"mousemove",touchstart:"ontouchstart"in e?"touchstart":"mousedown"};function y(n,o){const r=this[0];let i=this[1];const s=n.on?v[n.on]||n.on:n;if(n.on){const t=n.tag,o=n.callback;function c(n){if(!g.job[t])return!1;(n=n||e.event).source=n.source||n.srcElement;const o=n.target||n.source,r=g.job[t].target,s=g.job[t].callback;if(r){if(r){const e=[].slice.call(this.querySelectorAll(r)),l=e.length;for(;i--;)o===e[l]&&(!0===limit&&(this.removeEventListener(n.type,c,0),g.job[t]&&delete g.job[t]),s.call(n.source,n))}}else!0===g.job[t].limit&&(this.removeEventListener(n.type,c,0),g.job[t]&&delete g.job[t]),s.call(this,n)}for(n=Object.assign({},{tag:"",on:"",target:!1,callback:()=>{},limit:!1},n),t&&!g.job[t]&&o&&(g.job[t]=n);i--;)r[i].addEventListener(s,c,0)}else for(;i--;)r[i].addEventListener(s,t(o,r[i]),0)}function E(e,n){const o=this[0];let r=this[1];const i=g.job[e].callback||n,s=n?e:g.job[e].on;for(;r--;)o[r].removeEventListener(s,t(i,o[r]),0);g.job[e]&&delete g.job[e]}function j(){const t=this.style["z-index"];return e.document.defaultView.getComputedStyle(this).getPropertyValue("z-index"),parseInt(t,10)}function C(e){const t=this[0];let n=this[1];for(;n--;)t[n].style["z-index"]=e}function w(){const e=this.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}}function x(e){const t=this[0];let n=this[1];for(;n--;)(e.top||e.left)&&(t[n].style.position="fixed"),e.top&&(t[n].style.top=e.top+"px"),e.left&&(t[n].style.left=e.left+"px")}function k(...e){const t=this;if(1===e.length)return t.getAttribute(e[0])||t[e[0]];const n={};let o=e.length;for(;o--;)n[e[o]]=t.getAttribute(e[o])||t[e[o]];return n}function N(e,t){const n=this[0];let o,r=this[1];if(void 0!==t&&e.substring)if(t.substring())for(;r--;)e in n[r]?n[r].setAttribute(e,t):n[r][e]=t;else for(;r--;)n[r].removeAttribute(e);else if("[object Object]"===s(e))for(;r--;)for(o in e)e.hasOwnProperty(o)&&(e[o].substring()?o in n[r]?n[r].setAttribute(o,e[o]):n[r][o]=e[o]:n[r].removeAttribute(o))}function A(e){return e in(this.substring?document.createElement(this):this)}function O(e){const t=this[0];let n=this[1];for(;n--;)e in t[n]?t[n].removeAttribute(e):delete t[n][e]}function S(t){let n,o,r;const i={},s=["height","width"],c=s.indexOf(t)>-1?[t]:s,l=this;if(void 0!==l){let t=0;for(;t<c.length;t+=1)c[t]=c[t][0].toUpperCase()+c[t].slice(1),l===e?r=Math.max(l["inner"+c[t]]):(o=(n=l.body||l.documentElement||l)["offset"+c[t]],n["scroll"+c[t]]||n["client"+c[t]],r=Math.max(o)),i[c[t].toLowerCase()]=r+"px"}return i}function T(e){let t;const n=this[0];let o=this[1];for(;o--;)for(t in e)e.hasOwnProperty(t)&&("width"!==t&&"height"!==t||(n[o].style[t]=e[t]))}function B(...e){const t=this;if(1===e.length)return i(t,e[0]);const n={};let o=e.length;for(;o--;)n[e[o]]=i(t,e[o]);return n}function L(e,t){let n=this[0];const o=this[1];let i,c="";if(n&&n[0]&&n[0].substring)if("[object Array]"===s(n))for(i=0;i<o;)r.sheet.insertRule(n[i],r.sheet.cssRules.length),i+=1;else if(t&&t.substring)n+=" { "+e+":"+t+"; }",r.sheet.insertRule(n,r.sheet.cssRules.length);else if("[object Object]"===s(e)){for(W in e)e.hasOwnProperty(W)&&(c+=W+":"+W=="content"?"'"+e[W]+"';":e[W]+";");n+=" { "+c+" }",r.sheet.insertRule(n,r.sheet.cssRules.length)}else n.substring&&r.element.appendChild(r.context.createTextNode(n));else if(n){let o;if(e&&e.substring&&t)for(;i--;)n[i].style[e]=t;else{if("[object Object]"!==s(e))throw Error("Argument failed. Invalid argument.");for(;i--;)for(o in e)e.hasOwnProperty(o)&&(n[i].style[o]=e[o])}}}const R={job:{}};function z(t,n,o){const r=this||document,i=new e.MutationObserver(e=>(o(e),e));R.job[t]=i,i.observe(r,n)}function F(e,t){const n=[];let o=0,r=e.length;if(r>0||(e=[e],r=1),t&&t.substring)for(;e[o];){if(e[o+1]=e[o].nextElementSibling,e[o+1]&&e[o+1].matches(t)){n.push(e[o+1]);break}o+=1}else for(;e[o];)n.push(e[o].nextElementSibling),o+=1;return n}$$after=function(e){return $$(F(this.$,e))};const P={set:function(e){const t=(e=Object.assign({},h,e)).tag,n=e.callback;if(t){if(!n)return!!a.job[t];$(t,n)}},void:function(t){e.cancelAnimationFrame(a.job[t]);const n=!!a.job[t];return delete a.job[t],n}};function I(e,t,n){parseInt(t,10)&&(n=t,t=null);let o=-1,r=e.length;r>0||(e=[e],r=1);const i=[];let s=0;for(;(o+=1)<r;){let r=e[o];for(;r.parentElement&&(!n||s<=n);)s+=1,r=r.parentElement,t&&!r.matches(t)||i.push(r);s=0}return i}function M(e,t){const n=[];let o=e.length;if(o>0||(e=[e],o=1),t&&t.substring)for(;e[o-1];){if(e[o-2]=e[o-1].previousElementSibling,e[o-2].matches(t)){n.push(e[o-2]);break}o--}else for(;o--;)n.push(e[o].previousElementSibling);return n}function V(e,t){let n=e.length;n>0||(e=[e],n=1);const o=[];let r,i;if(t)for(;n--;)for(i=(r=e[n].children).length;i--;)r[i].matches(t)&&o.unshift(r[i]);else for(;n--;)for(i=(r=e[n].childNodes).length;i--;)o.unshift(r[i]);return o}function q(e){let n=e?e.length:0;return n>0||(e=[e],n=1),{set:t(d,[e,n]),swap:t(m,[e,n]),void:t(p,[e,n])}}function U(e,t,n,o){o||(U.collector=[]),parseInt(t,10)&&(n=t,t=null);let r,i=o||0,s=-1,c=e.length,l=[];for(c>0||(e=[e],c=1);(s+=1)<c;)!e[s]||t&&!e[s].matches(t)||U.collector.push(e[s]),(r=e[s].children)&&r.length&&(l=l.concat([].slice.call(r)));for(s=-1,c=l.length,i+=1;(s+=1)<c;)r[s]&&(!n||i<=n)&&U(r[s],t,n,i);return U.collector}function D(e){let n=e.length;n>0||(e=[e],n=1);const o=["blur","click","dblclick","focus","keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","submit","touchcancel","touchend","touchenter","touchleave","touchmove","touchstart"],r={emit:t(b,[e,n]),void:t(E,[e,n]),set:t(y,[e,n])},i=function(){this[0].call(e,this[1])};let s=o.length;for(;s--;)r[o[s]]=t(i,[r.emit,o[s]]);return r}function X(e){let n=e.length;if(n>0||(e=[e],n=1),1===e[0].nodeType)return{get:t(j,e[0]),set:t(C,[e,n])};throw Error("Not an element")}function H(e,t,n){return t.substring&&"function"==typeof n?c(e,e=>{if(e.matches(t))return n(e)}):t.substring?c(e,e=>e.matches(t)):"function"==typeof t&&c(e,e=>t(e))}$$ascend=function(e,t){return $$(I(this.$,e,t))},$$before=function(e){return $$(M(this.$,e))},$$child=function(e){return $$(V(this.$,e))},$$class={set:function(e){return q($$.fn.$).set(e),$$.fn},swap:function(e,t){return q($$.fn.$).swap(e,t),$$.fn},void:function(e){return q($$.fn.$).void(e),$$.fn}},$$descend=function(e,t){return $$(U(this.$,e,t))},$$event={emit:function(e,t){return D($$.fn.$).emit(e,t),$$.fn},set:function(e){return D($$.fn.$).set(e),$$.fn},void:function(e,t){return D($$.fn.$).void(e,t),$$.fn}},$$layer={get:function(){return X($$.fn.$).get()},set:function(e){return X($$.fn.$).set(e),$$.fn}},$$match=function(e,t){return $$(H(this.$,e,t))};const Y=["after","before","innerBegin","innerEnd","outerBegin","outerEnd"];function G(e,t,n){let o=e.length||0;o>0||(e=[e],o=1);let r,i=-1;if(Y.indexOf(t)<0&&(n=t,t=!1),n&&n.substring&&(n=document.createRange().createContextualFragment(n)),n||t)if(t)for(;o--;)switch(r=e[o].parentNode||document.documentElement,t){case"after":r.insertBefore(n,e[o].nextElementSibling);break;case"before":r.insertBefore(n,e[o]);break;case"innerBegin":e[o].insertBefore(n,e[o].firstChild);break;case"innerEnd":e[o].appendChild(n);break;case"outerBegin":r.insertBefore(n,r.firstChild);break;case"outerEnd":r.appendChild(n);break;default:throw Error("Unknown mountpoint: "+t)}else for(;o--;){for(;e[o].lastChild;)e[o].removeChild(e[o].lastChild);e[o].appendChild(n)}else for(;(i+=1)<o;)document.body.appendChild(e[i])}function J(e){let n=e.length;return n>0||(e=[e],n=1),{get:t(w,e[0]),set:t(x,[e,n])}}function K(e,t){const n=[];let o=e.length||0;if(o>0||(e=[e],o=1),t){let t;for(;o--;)(t=e[o].offsetParent)&&n.push(t)}else for(;o--;)n.push(e[o].parentNode);return n}function Q(e){return{x:e.offsetLeft,y:e.offsetTop,z:X(e).get()}}function W(e){let n=e.length||0;return n>0||(e=[e],n=1),{get:t(k,e[0]),void:t(O,[e,n]),set:t(N,[e,n]),test:t(A,e[0])}}function Z(e,t){const n=t||document;if(/^((#|\.)?[\w-]+|((\.[\w-]+)(\s\.[\w-]+)+?)+)$/.test(e)){const t=e.charAt(0);return"#"===t?[n.getElementById(e.slice(1))]:"."===t?Array.prototype.slice.call(n.getElementsByClassName(e.replace(/\./g,""))):Array.prototype.slice.call(n.getElementsByTagName(e))}if("string"==typeof e)return Array.prototype.slice.call(n.querySelectorAll(e));if(1===(o=e).nodeType||9===o.nodeType||11===o.nodeType)return[e];if(e[0]&&e[0].nodeType)return Array.prototype.slice.call(e);var o;throw Error("Invalid argument.")}function _(e,t){let o;const r=[];let i=e.length;for(i>0||(e=[e],i=1);i--;)for(o=e[i].parentNode.childNodes,n=o.length;n--;)o[n]!==e[i]&&o[n].matches(t)?r.unshift(o[n]):o[n]!==e[i]&&r.unshift(o[n]);return r.length>1?r:r[0]}function ee(e){let n=e.length||0;return n>0||(e=[e],n=1),{get:t(S,e[0]),set:t(T,[e,n])}}function te(e,n){let i=e?e.length:0;return i>0||(e=[e],i=1),(n||!n&&r.context!==document)&&function(e){const t=e||document;r.context=t,r.element=e?t.createElement("style"):o,e&&r.element.appendChild(t.createTextNode("")),r.sheet=e?t.head.appendChild(r.element).sheet:o.sheet}(n),{get:t(B,e[0]),set:t(L,[e,i])}}function ne(e,t){let n,o,r=e.length||0;r>0||(e=[e],r=1);const i=Y.indexOf(t);for(i<0&&(n=t);r--;)if(n)e[r].removeChild(n);else if(i>-1)switch(o=e[r].parentNode||document.documentElement,t){case"after":o.removeChild(e[r].nextElementSibling);break;case"before":o.removeChild(e[r].previousElementSibling);break;case"innerBegin":e[r].removeChild(e[r].firstChild);break;case"innerEnd":e[r].removeChild(e[r].lastChild);break;case"outerBegin":o.removeChild(o.firstChild);break;case"outerEnd":o.removeChild(o.lastChild);break;default:throw Error("Unknown mountpoint: '"+t+"'.")}else e[r].parentNode.removeChild(e[r])}function oe(e){return{set:t(z,e)}}$$mount=function(e,t){return G(this.$,e,t),this},$$offset={get:function(){return J($$.fn.$).get()},set:function(e){return J($$.fn.$).set(e),$$.fn}},$$parent=function(e){return $$(K(this.$,e))},$$position=function(){return Q(this.$[0])},$$prop={get:function(){return k.apply($$.fn.$[0],arguments)},set:function(e,t){return W($$.fn.$).set(e,t),$$.fn},test:function(e){return A.apply($$.fn.$[0],e)},void:function(e){return W($$.fn.$).void(e),$$.fn}},$$sibling=function(e){let t=_(this.$,e);return t=t.length>1?t:[t],$$(t)},$$size={get:function(e){return ee($$.fn.$).get(e)},set:function(e){return ee($$.fn.$).set(e),$$.fn}},$$style={get:function(e,t){return B.apply($$.fn.$[0],arguments)},set:function(e,t){return te($$.fn.selector,$$.fn.context).set(e,t),$$.fn}},$$unmount=function(e,t){return ne(this.$,e),this},oe.void=function(e){const t=!!R.job[e];return R.job[e].disconnect(),delete R.job[e],t},$$=e.$$=e.elemint=((t,n)=>($$.fn.context=n||document,$$.fn.$=t!==e?Z(t,$$.fn.context):[t],$$.fn.selector=t,new $$.fn)),$$.fn=$$.prototype=function(){},$$.fn.prototype=$$.fn,e.$||(e.$=$$),"undefined"!=typeof module&&module.exports&&(module.exports=$$),$$.fn.after=$$after,$$.fn.ascend=$$ascend,$$.fn.before=$$before,$$.fn.child=$$child,$$.fn.class=$$class,$$.fn.descend=$$descend,$$.fn.event=$$event,$$.fn.layer=$$layer,$$.fn.match=$$match,$$.fn.mount=$$mount,$$.fn.offset=$$offset,$$.fn.parent=$$parent,$$.fn.position=$$position,$$.fn.prop=$$prop,$$.fn.sibling=$$sibling,$$.fn.size=$$size,$$.fn.style=$$style,$$.fn.unmount=$$unmount,$$.after=F,$$.animate=P,$$.ascend=I,$$.before=M,$$.child=V,$$.class=q,$$.descend=U,$$.event=D,$$.fragment=function(e){let t;if(e.substring)t=document.createRange().createContextualFragment(e);else{t=document.createDocumentFragment();let n=e.length;n>0||(e=[e],n=1);let o=0;for(;o<n;o+=1)t.appendChild(e[o])}return t},$$.layer=X,$$.match=H,$$.mount=G,$$.offset=J,$$.parent=K,$$.position=Q,$$.prop=W,$$.query=$$.$=Z,$$.ready=function(n,o){"function"==typeof n&&(o=n,n=document),"complete"!==n.readyState&&"loaded"!==n.readyState&&(e.ActiveXObject||"ActiveXObject"in e||"interactive"!==n.readyState)?n.addEventListener("DOMContentLoaded",t(o,n),0):o.call(n)},$$.render=function(e){const t=document.createRange().createContextualFragment(e);return[].slice.call(t.childNodes)},$$.sibling=_,$$.size=ee,$$.style=te,$$.unmount=ne,$$.watch=oe,$$}(globalThis||global||window);
